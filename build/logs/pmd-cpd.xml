<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd version="phpcpd 1.3.5">
  <duplication lines="10" tokens="75">
    <file path="/var/www/cni/entradas2/jpgraph/jpgraph_pie.php" line="1016"/>
    <file path="/var/www/cni/entradas2/jpgraph/jpgraph_pie3d.php" line="899"/>
    <codefragment>            while( $a &gt; 2*M_PI ) $a -= 2*M_PI;

            if( $a&gt;=7*M_PI/4 || $a &lt;= M_PI/4 ) $dx=0;
            if( $a&gt;=M_PI/4 &amp;&amp; $a &lt;= 3*M_PI/4 ) $dx=($a-M_PI/4)*2/M_PI;
            if( $a&gt;=3*M_PI/4 &amp;&amp; $a &lt;= 5*M_PI/4 ) $dx=1;
            if( $a&gt;=5*M_PI/4 &amp;&amp; $a &lt;= 7*M_PI/4 ) $dx=(1-($a-M_PI*5/4)*2/M_PI);

            if( $a&gt;=7*M_PI/4 ) $dy=(($a-M_PI)-3*M_PI/4)*2/M_PI;
            if( $a&lt;=M_PI/4 ) $dy=(1-$a*2/M_PI);
            if( $a&gt;=M_PI/4 &amp;&amp; $a &lt;= 3*M_PI/4 ) $dy=1;
</codefragment>
  </duplication>
  <duplication lines="11" tokens="80">
    <file path="/var/www/cni/entradas2/jpgraph/jpgraph_windrose.php" line="967"/>
    <file path="/var/www/cni/entradas2/jpgraph/jpgraph_windrose.php" line="1129"/>
    <codefragment>            if( $this-&gt;iLabelPositioning == LBLPOSITION_CENTER ) {
                $dx = $dy = 0;
            }
            else {
                // LBLPOSIITON_EDGE
                if( $a&gt;=7*M_PI/4 || $a &lt;= M_PI/4 ) $dx=0;
                if( $a&gt;=M_PI/4 &amp;&amp; $a &lt;= 3*M_PI/4 ) $dx=($a-M_PI/4)*2/M_PI;
                if( $a&gt;=3*M_PI/4 &amp;&amp; $a &lt;= 5*M_PI/4 ) $dx=1;
                if( $a&gt;=5*M_PI/4 &amp;&amp; $a &lt;= 7*M_PI/4 ) $dx=(1-($a-M_PI*5/4)*2/M_PI);

                if( $a&gt;=7*M_PI/4 ) $dy=(($a-M_PI)-3*M_PI/4)*2/M_PI;
</codefragment>
  </duplication>
  <duplication lines="33" tokens="134">
    <file path="/var/www/cni/entradas2/jpgraph/themes/AquaTheme.class.php" line="52"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/GreenTheme.class.php" line="34"/>
    <codefragment>    function SetupGraph($graph) {

        // graph
        /*
        $img = $graph-&gt;img;
        $height = $img-&gt;height;
        $graph-&gt;SetMargin($img-&gt;left_margin, $img-&gt;right_margin, $img-&gt;top_margin, $height * 0.25);
        */
        $graph-&gt;SetFrame(false);
        $graph-&gt;SetMarginColor('white');
        $graph-&gt;SetBackgroundGradient($this-&gt;background_color, '#FFFFFF', GRAD_HOR, BGRAD_PLOT);

        // legend
        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.85, 'center', 'top');
        $graph-&gt;legend-&gt;SetFillColor('white');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(3);
        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // xaxis
        $graph-&gt;xaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;xaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;xaxis-&gt;SetTickSide(SIDE_BOTTOM);
        $graph-&gt;xaxis-&gt;SetLabelMargin(10);
                
        // yaxis
        $graph-&gt;yaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;yaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;yaxis-&gt;SetTickSide(SIDE_LEFT);
        $graph-&gt;yaxis-&gt;SetLabelMargin(8);
        $graph-&gt;yaxis-&gt;HideLine();
</codefragment>
  </duplication>
  <duplication lines="80" tokens="268">
    <file path="/var/www/cni/entradas2/jpgraph/themes/AquaTheme.class.php" line="52"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/OceanTheme.class.php" line="36"/>
    <codefragment>    function SetupGraph($graph) {

        // graph
        /*
        $img = $graph-&gt;img;
        $height = $img-&gt;height;
        $graph-&gt;SetMargin($img-&gt;left_margin, $img-&gt;right_margin, $img-&gt;top_margin, $height * 0.25);
        */
        $graph-&gt;SetFrame(false);
        $graph-&gt;SetMarginColor('white');
        $graph-&gt;SetBackgroundGradient($this-&gt;background_color, '#FFFFFF', GRAD_HOR, BGRAD_PLOT);

        // legend
        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.85, 'center', 'top');
        $graph-&gt;legend-&gt;SetFillColor('white');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(3);
        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // xaxis
        $graph-&gt;xaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;xaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;xaxis-&gt;SetTickSide(SIDE_BOTTOM);
        $graph-&gt;xaxis-&gt;SetLabelMargin(10);
                
        // yaxis
        $graph-&gt;yaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;yaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;yaxis-&gt;SetTickSide(SIDE_LEFT);
        $graph-&gt;yaxis-&gt;SetLabelMargin(8);
        $graph-&gt;yaxis-&gt;HideLine();
        $graph-&gt;yaxis-&gt;HideTicks();
        $graph-&gt;xaxis-&gt;SetTitleMargin(15);

        // grid
        $graph-&gt;ygrid-&gt;SetColor($this-&gt;grid_color);
        $graph-&gt;ygrid-&gt;SetLineStyle('dotted');


        // font
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

//        $graph-&gt;img-&gt;SetAntiAliasing();
    }


    function SetupPieGraph($graph) {

        // graph
        $graph-&gt;SetFrame(false);

        // legend
        $graph-&gt;legend-&gt;SetFillColor('white');

        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.80, 'center', 'top');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(4);

        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // title
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

        $graph-&gt;SetAntiAliasing();
    }


    function PreStrokeApply($graph) {
        if ($graph-&gt;legend-&gt;HasItems()) {
            $img = $graph-&gt;img;
            $height = $img-&gt;height;
            $graph-&gt;SetMargin(
</codefragment>
  </duplication>
  <duplication lines="99" tokens="298">
    <file path="/var/www/cni/entradas2/jpgraph/themes/AquaTheme.class.php" line="52"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/OrangeTheme.class.php" line="36"/>
    <codefragment>    function SetupGraph($graph) {

        // graph
        /*
        $img = $graph-&gt;img;
        $height = $img-&gt;height;
        $graph-&gt;SetMargin($img-&gt;left_margin, $img-&gt;right_margin, $img-&gt;top_margin, $height * 0.25);
        */
        $graph-&gt;SetFrame(false);
        $graph-&gt;SetMarginColor('white');
        $graph-&gt;SetBackgroundGradient($this-&gt;background_color, '#FFFFFF', GRAD_HOR, BGRAD_PLOT);

        // legend
        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.85, 'center', 'top');
        $graph-&gt;legend-&gt;SetFillColor('white');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(3);
        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // xaxis
        $graph-&gt;xaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;xaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;xaxis-&gt;SetTickSide(SIDE_BOTTOM);
        $graph-&gt;xaxis-&gt;SetLabelMargin(10);
                
        // yaxis
        $graph-&gt;yaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;yaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;yaxis-&gt;SetTickSide(SIDE_LEFT);
        $graph-&gt;yaxis-&gt;SetLabelMargin(8);
        $graph-&gt;yaxis-&gt;HideLine();
        $graph-&gt;yaxis-&gt;HideTicks();
        $graph-&gt;xaxis-&gt;SetTitleMargin(15);

        // grid
        $graph-&gt;ygrid-&gt;SetColor($this-&gt;grid_color);
        $graph-&gt;ygrid-&gt;SetLineStyle('dotted');


        // font
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

//        $graph-&gt;img-&gt;SetAntiAliasing();
    }


    function SetupPieGraph($graph) {

        // graph
        $graph-&gt;SetFrame(false);

        // legend
        $graph-&gt;legend-&gt;SetFillColor('white');

        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.80, 'center', 'top');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(4);

        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // title
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

        $graph-&gt;SetAntiAliasing();
    }


    function PreStrokeApply($graph) {
        if ($graph-&gt;legend-&gt;HasItems()) {
            $img = $graph-&gt;img;
            $height = $img-&gt;height;
            $graph-&gt;SetMargin(
                $img-&gt;raw_left_margin, 
                $img-&gt;raw_right_margin, 
                $img-&gt;raw_top_margin, 
                $height * 0.25
            );
        }
    }

    function ApplyPlot($plot) {

        switch (get_class($plot))
        { 
            case 'GroupBarPlot':
            {
                foreach ($plot-&gt;plots as $_plot) {
                    $this-&gt;ApplyPlot($_plot);
                }
                break;
            }
</codefragment>
  </duplication>
  <duplication lines="61" tokens="218">
    <file path="/var/www/cni/entradas2/jpgraph/themes/AquaTheme.class.php" line="52"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/PastelTheme.class.php" line="30"/>
    <codefragment>    function SetupGraph($graph) {

        // graph
        /*
        $img = $graph-&gt;img;
        $height = $img-&gt;height;
        $graph-&gt;SetMargin($img-&gt;left_margin, $img-&gt;right_margin, $img-&gt;top_margin, $height * 0.25);
        */
        $graph-&gt;SetFrame(false);
        $graph-&gt;SetMarginColor('white');
        $graph-&gt;SetBackgroundGradient($this-&gt;background_color, '#FFFFFF', GRAD_HOR, BGRAD_PLOT);

        // legend
        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.85, 'center', 'top');
        $graph-&gt;legend-&gt;SetFillColor('white');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(3);
        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // xaxis
        $graph-&gt;xaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;xaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;xaxis-&gt;SetTickSide(SIDE_BOTTOM);
        $graph-&gt;xaxis-&gt;SetLabelMargin(10);
                
        // yaxis
        $graph-&gt;yaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;yaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;yaxis-&gt;SetTickSide(SIDE_LEFT);
        $graph-&gt;yaxis-&gt;SetLabelMargin(8);
        $graph-&gt;yaxis-&gt;HideLine();
        $graph-&gt;yaxis-&gt;HideTicks();
        $graph-&gt;xaxis-&gt;SetTitleMargin(15);

        // grid
        $graph-&gt;ygrid-&gt;SetColor($this-&gt;grid_color);
        $graph-&gt;ygrid-&gt;SetLineStyle('dotted');


        // font
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

//        $graph-&gt;img-&gt;SetAntiAliasing();
    }


    function SetupPieGraph($graph) {

        // graph
        $graph-&gt;SetFrame(false);

        // legend
        $graph-&gt;legend-&gt;SetFillColor('white');

        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.80, 'center', 'top');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
</codefragment>
  </duplication>
  <duplication lines="27" tokens="80">
    <file path="/var/www/cni/entradas2/jpgraph/themes/GreenTheme.class.php" line="97"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/PastelTheme.class.php" line="93"/>
    <codefragment>        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // title
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

        $graph-&gt;SetAntiAliasing();
    }


    function PreStrokeApply($graph) {
        if ($graph-&gt;legend-&gt;HasItems()) {
            $img = $graph-&gt;img;
            $height = $img-&gt;height;
            $graph-&gt;SetMargin($img-&gt;left_margin, $img-&gt;right_margin, $img-&gt;top_margin, $height * 0.25);
        }
    }

    function ApplyPlot($plot) {

        switch (get_class($plot))
        { 
            case 'GroupBarPlot':
            {
                foreach ($plot-&gt;plots as $_plot) {
</codefragment>
  </duplication>
  <duplication lines="99" tokens="298">
    <file path="/var/www/cni/entradas2/jpgraph/themes/AquaTheme.class.php" line="52"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/RoseTheme.class.php" line="36"/>
    <codefragment>    function SetupGraph($graph) {

        // graph
        /*
        $img = $graph-&gt;img;
        $height = $img-&gt;height;
        $graph-&gt;SetMargin($img-&gt;left_margin, $img-&gt;right_margin, $img-&gt;top_margin, $height * 0.25);
        */
        $graph-&gt;SetFrame(false);
        $graph-&gt;SetMarginColor('white');
        $graph-&gt;SetBackgroundGradient($this-&gt;background_color, '#FFFFFF', GRAD_HOR, BGRAD_PLOT);

        // legend
        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.85, 'center', 'top');
        $graph-&gt;legend-&gt;SetFillColor('white');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(3);
        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // xaxis
        $graph-&gt;xaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;xaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;xaxis-&gt;SetTickSide(SIDE_BOTTOM);
        $graph-&gt;xaxis-&gt;SetLabelMargin(10);
                
        // yaxis
        $graph-&gt;yaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;yaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;yaxis-&gt;SetTickSide(SIDE_LEFT);
        $graph-&gt;yaxis-&gt;SetLabelMargin(8);
        $graph-&gt;yaxis-&gt;HideLine();
        $graph-&gt;yaxis-&gt;HideTicks();
        $graph-&gt;xaxis-&gt;SetTitleMargin(15);

        // grid
        $graph-&gt;ygrid-&gt;SetColor($this-&gt;grid_color);
        $graph-&gt;ygrid-&gt;SetLineStyle('dotted');


        // font
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

//        $graph-&gt;img-&gt;SetAntiAliasing();
    }


    function SetupPieGraph($graph) {

        // graph
        $graph-&gt;SetFrame(false);

        // legend
        $graph-&gt;legend-&gt;SetFillColor('white');

        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.80, 'center', 'top');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(4);

        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // title
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

        $graph-&gt;SetAntiAliasing();
    }


    function PreStrokeApply($graph) {
        if ($graph-&gt;legend-&gt;HasItems()) {
            $img = $graph-&gt;img;
            $height = $img-&gt;height;
            $graph-&gt;SetMargin(
                $img-&gt;raw_left_margin, 
                $img-&gt;raw_right_margin, 
                $img-&gt;raw_top_margin, 
                $height * 0.25
            );
        }
    }

    function ApplyPlot($plot) {

        switch (get_class($plot))
        { 
            case 'GroupBarPlot':
            {
                foreach ($plot-&gt;plots as $_plot) {
                    $this-&gt;ApplyPlot($_plot);
                }
                break;
            }
</codefragment>
  </duplication>
  <duplication lines="11" tokens="59">
    <file path="/var/www/cni/entradas2/jpgraph/themes/AquaTheme.class.php" line="65"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/SoftyTheme.class.php" line="52"/>
    <codefragment>        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.85, 'center', 'top');
        $graph-&gt;legend-&gt;SetFillColor('white');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(3);
        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // xaxis
        $graph-&gt;xaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;xaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
</codefragment>
  </duplication>
  <duplication lines="28" tokens="91">
    <file path="/var/www/cni/entradas2/jpgraph/themes/AquaTheme.class.php" line="102"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/UniversalTheme.class.php" line="89"/>
    <codefragment>    function SetupPieGraph($graph) {

        // graph
        $graph-&gt;SetFrame(false);

        // legend
        $graph-&gt;legend-&gt;SetFillColor('white');

        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.80, 'center', 'top');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(4);

        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // title
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

        $graph-&gt;SetAntiAliasing();
    }


    function PreStrokeApply($graph) {
        if ($graph-&gt;legend-&gt;HasItems()) {
            $img = $graph-&gt;img;
</codefragment>
  </duplication>
  <duplication lines="26" tokens="37">
    <file path="/var/www/cni/entradas2/jpgraph/themes/GreenTheme.class.php" line="113"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/UniversalTheme.class.php" line="122"/>
    <codefragment>            $graph-&gt;SetMargin($img-&gt;left_margin, $img-&gt;right_margin, $img-&gt;top_margin, $height * 0.25);
        }
    }

    function ApplyPlot($plot) {

        switch (get_class($plot))
        { 
            case 'GroupBarPlot':
            {
                foreach ($plot-&gt;plots as $_plot) {
                    $this-&gt;ApplyPlot($_plot);
                }
                break;
            }

            case 'AccBarPlot':
            {
                foreach ($plot-&gt;plots as $_plot) {
                    $this-&gt;ApplyPlot($_plot);
                }
                break;
            }

            case 'BarPlot':
            {
</codefragment>
  </duplication>
  <duplication lines="104" tokens="330">
    <file path="/var/www/cni/entradas2/jpgraph/themes/AquaTheme.class.php" line="52"/>
    <file path="/var/www/cni/entradas2/jpgraph/themes/VividTheme.class.php" line="30"/>
    <codefragment>    function SetupGraph($graph) {

        // graph
        /*
        $img = $graph-&gt;img;
        $height = $img-&gt;height;
        $graph-&gt;SetMargin($img-&gt;left_margin, $img-&gt;right_margin, $img-&gt;top_margin, $height * 0.25);
        */
        $graph-&gt;SetFrame(false);
        $graph-&gt;SetMarginColor('white');
        $graph-&gt;SetBackgroundGradient($this-&gt;background_color, '#FFFFFF', GRAD_HOR, BGRAD_PLOT);

        // legend
        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.85, 'center', 'top');
        $graph-&gt;legend-&gt;SetFillColor('white');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(3);
        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // xaxis
        $graph-&gt;xaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;xaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;xaxis-&gt;SetTickSide(SIDE_BOTTOM);
        $graph-&gt;xaxis-&gt;SetLabelMargin(10);
                
        // yaxis
        $graph-&gt;yaxis-&gt;title-&gt;SetColor($this-&gt;font_color);  
        $graph-&gt;yaxis-&gt;SetColor($this-&gt;axis_color, $this-&gt;font_color);    
        $graph-&gt;yaxis-&gt;SetTickSide(SIDE_LEFT);
        $graph-&gt;yaxis-&gt;SetLabelMargin(8);
        $graph-&gt;yaxis-&gt;HideLine();
        $graph-&gt;yaxis-&gt;HideTicks();
        $graph-&gt;xaxis-&gt;SetTitleMargin(15);

        // grid
        $graph-&gt;ygrid-&gt;SetColor($this-&gt;grid_color);
        $graph-&gt;ygrid-&gt;SetLineStyle('dotted');


        // font
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

//        $graph-&gt;img-&gt;SetAntiAliasing();
    }


    function SetupPieGraph($graph) {

        // graph
        $graph-&gt;SetFrame(false);

        // legend
        $graph-&gt;legend-&gt;SetFillColor('white');

        $graph-&gt;legend-&gt;SetFrameWeight(0);
        $graph-&gt;legend-&gt;Pos(0.5, 0.80, 'center', 'top');
        $graph-&gt;legend-&gt;SetLayout(LEGEND_HOR);
        $graph-&gt;legend-&gt;SetColumns(4);

        $graph-&gt;legend-&gt;SetShadow(false);
        $graph-&gt;legend-&gt;SetMarkAbsSize(5);

        // title
        $graph-&gt;title-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subtitle-&gt;SetColor($this-&gt;font_color);
        $graph-&gt;subsubtitle-&gt;SetColor($this-&gt;font_color);

        $graph-&gt;SetAntiAliasing();
    }


    function PreStrokeApply($graph) {
        if ($graph-&gt;legend-&gt;HasItems()) {
            $img = $graph-&gt;img;
            $height = $img-&gt;height;
            $graph-&gt;SetMargin(
                $img-&gt;raw_left_margin, 
                $img-&gt;raw_right_margin, 
                $img-&gt;raw_top_margin, 
                $height * 0.25
            );
        }
    }

    function ApplyPlot($plot) {

        switch (get_class($plot))
        { 
            case 'GroupBarPlot':
            {
                foreach ($plot-&gt;plots as $_plot) {
                    $this-&gt;ApplyPlot($_plot);
                }
                break;
            }

            case 'AccBarPlot':
            {
                foreach ($plot-&gt;plots as $_plot) {
                    $this-&gt;ApplyPlot($_plot);
</codefragment>
  </duplication>
  <duplication lines="11" tokens="27">
    <file path="/var/www/cni/inc/ezpdf/class.pdf.php" line="2032"/>
    <file path="/var/www/cni/inc/ezpdf/class.pdf.php" line="2095"/>
    <codefragment>          case 'c':&#13;
            // this this might be a callback function&#13;
            $j++;&#13;
            $k = strpos($text,'&gt;',$j);&#13;
            if ($k!==false &amp;&amp; $text[$j]==':'){&#13;
              // then this will be treated as a callback directive&#13;
              $directive = $k-$i+1;&#13;
              $f=0;&#13;
              // split the remainder on colons to get the function name and the paramater&#13;
              $tmp = substr($text,$j+1,$k-$j-1);&#13;
              $b1 = strpos($tmp,':');&#13;
</codefragment>
  </duplication>
  <duplication lines="6" tokens="14">
    <file path="/var/www/cni/rapido/genfactura.php" line="615"/>
    <file path="/var/www/cni/rapido/genfactura.php" line="645"/>
    <codefragment>	$sql .= consulta_no_agrupado($cliente);
	//echo $sql;/*PUNTO DE CONTROL*/
	$consulta = mysql_query($sql,$con);
	while (true == ($resultado=mysql_fetch_array($consulta))) {
		$subtotal = $resultado[4] + ($resultado[4]*$resultado[5])/100;
//acumulados
</codefragment>
  </duplication>
</pmd-cpd>
