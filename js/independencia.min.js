function validar(){var e=$F("usuario"),o=$F("passwd"),a="inc/validacion.php",t="opcion=0&usuario="+e+"&passwd="+o;new Ajax.Request(a,{method:"post",parameters:t,onComplete:function(e){$("cuerpo").innerHTML=e.responseText},onCreate:$("cuerpo").innerHTML="<center><p class='validacion'>Validando Usuario<br/><img src='imagenes/loader.gif' alt='Validando Usuario' /></p></center>"});return!1}function menu(e){var o="inc/generator.php",a="opcion=0&codigo="+e;new Ajax.Request(o,{method:"post",parameters:a,onComplete:function(e){$("principal").innerHTML=e.responseText}})}function busca(){var e=$("resultados").style;e.visibility="visible",e.display="block";var o="inc/generator.php",a=$F("texto").toUpperCase(),t=$F("tabla"),n="opcion=1&texto="+a+"&tabla="+t;n=encodeURI(n);new Ajax.Request(o,{method:"post",parameters:n,onComplete:function(e){$("resultados").innerHTML=e.responseText}})}function cierra_frm_busca(){var e=$("resultados").style;e.visibility="hidden",e.display="none"}function cierra_el_formulario(){var e=$("formulario").style;e.visibility="hidden",e.display="none"}function muestra_el_formulario(){var e=$("formulario").style;e.visibility="visible",e.display="block"}function muestra(e){var o="inc/generator.php",a=$F("tabla"),t="opcion=2&registro="+e+"&tabla="+a;new Ajax.Request(o,{method:"post",parameters:t,onComplete:function(e){$("formulario").innerHTML=e.responseText,campos_fecha(a),cierra_frm_busca(),muestra_el_formulario()}})}function upss(e){alert("Debes seleccionar una categoria")}function submenu(e){var o="inc/generator.php",a=$F("idemp"),t="opcion=3&codigo="+e+"&registro="+a;new Ajax.Request(o,{method:"post",parameters:t,onComplete:function(e){$("formulario").innerHTML=e.responseText,campos_fecha($F("nombre_tabla"))}})}function campos_fecha(e){switch(e){case"facturacion":Calendar.setup({inputField:"finicio",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_finicio",singleClick:!1,step:1}),Calendar.setup({inputField:"duracion",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_duracion",singleClick:!1,step:1}),Calendar.setup({inputField:"renovacion",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_renovacion",singleClick:!1,step:1});break;case"pcentral":Calendar.setup({inputField:"cumple",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_cumple",singleClick:!1,step:1});break;case"pempresa":Calendar.setup({inputField:"cumple",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_cumple",singleClick:!1,step:1});break;case"z_facturacion":Calendar.setup({inputField:"finicio",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_finicio",singleClick:!1,step:1}),Calendar.setup({inputField:"renovacion",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_renovacion",singleClick:!1,step:1});break;case"empleados":Calendar.setup({inputField:"fnac",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_fnac",singleClick:!1,step:1}),Calendar.setup({inputField:"fcon",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_fcon",singleClick:!1,step:1});break;case"entradas_salidas":Calendar.setup({inputField:"entrada",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_entrada",singleClick:!1,step:1}),Calendar.setup({inputField:"salida",ifFormat:"%d-%m-%Y",showsTime:!0,button:"f_trigger_salida",singleClick:!1,step:1})}}function actualiza_registro(){muestra_debug();var e="inc/generator.php",o=$F("numero_registro"),a=$("formulario_actualizacion"),t="opcion=4&"+Form.serialize(a);new Ajax.Request(e,{method:"post",parameters:t,onComplete:function(e){$("debug").innerHTML=e.responseText,muestra(o);setTimeout("cierra_debug()",2e3)}})}function muestra_debug(){$("debug").innerHTML="";var e=$("debug").style;e.visibility="visible",e.display="block"}function cierra_debug(){var e=$("debug").style;e.visibility="hidden",e.display="none"}function editor(){for(var e=document.getElementsByTagName("textarea"),o=0;o<e.length;o++){var a=new FCKeditor(e[o].name);a.BasePath="FCKeditor/",a.ToolbarSet="Default",a.ReplaceTextarea()}}function nuevo(e){var o=$F("tabla"),a="inc/generator.php",t="opcion=5&tabla="+e;new Ajax.Request(a,{method:"post",parameters:t,onComplete:function(e){$("formulario").innerHTML=e.responseText,campos_fecha(o),muestra_el_formulario()}})}function agrega_registro(){var e="inc/generator.php",o=$F("opcion"),a=$("formulario_alta");muestra_debug();new Ajax.Request(e,{method:"post",parameters:"opcion=6&"+Form.serialize(a),onComplete:function(e){busca(),$("debug").innerHTML=e.responseText;setTimeout("cierra_debug()",2e3);2!=o&&3!=o&&4!=o&&5!=o&&6!=o&&8!=o&&11!=o||submenu(o)}})}function borrar_registro(e){var o=confirm("ï¿½Borrar Registro?");if(1==o){var a=$F("nombre_tabla"),t=$F("opcion"),n="inc/generator.php",i="opcion=7&tabla="+a+"&registro="+e;i=encodeURI(i),muestra_debug();new Ajax.Request(n,{method:"post",parameters:i,onComplete:function(e){busca(),$("debug").innerHTML=e.responseText;setTimeout("cierra_debug()",2e3);0!=t?submenu(t):nuevo($F("nuevo"))}})}}function muestra_registro(e){var o=$F("codigo"),a=$F("nombre_tabla"),t=($F("opcion"),"inc/generator.php"),n="opcion=3&codigo="+o+"&registro="+e+"&tabla="+a+"&marcado=1";new Ajax.Request(t,{method:"post",parameters:n,onComplete:function(e){$("formulario").innerHTML=e.responseText,campos_fecha(a)}})}function frm_srv_fijo(e){var o="inc/generator.php",a="opcion=8&cliente="+e;new Ajax.Request(o,{method:"post",parameters:a,onComplete:function(e){$("frm_srv_fijos").innerHTML=e.responseText}})}function muestra_srv_fijo(e){var o="inc/generator.php",a="opcion=8&id="+e;new Ajax.Request(o,{method:"post",parameters:a,onComplete:function(e){$("frm_srv_fijos").innerHTML=e.responseText}})}function cambia_los_otros(){var e="inc/generator.php",o=$("servicio").value,a="opcion=9&servicio="+o;new Ajax.Request(e,{method:"post",parameters:a,onComplete:function(e){var o=new String(e.responseText),a=o.split(":");$("importe").value=a[0],$("iva").value=a[1]}})}function agrega_srv_fijos(){var e="inc/generator.php",o=$F("id_Cliente"),a="opcion=10&"+Form.serialize($("frm_srv_fijos"));muestra_debug();new Ajax.Request(e,{method:"post",parameters:a,onComplete:function(e){$("debug").innerHTML=e.responseText;setTimeout("cierra_debug()",2e3);submenu(2),frm_srv_fijo(o)}})}function borra_srv_fijo(e){var o="inc/generator.php",a="opcion=11&id="+e;muestra_debug();new Ajax.Request(o,{method:"post",parameters:a,onComplete:function(e){$("debug").innerHTML=e.responseText;setTimeout("cierra_debug()",2e3);submenu(2)}})}function actualiza_srv_fijos(){var e="inc/generator.php",o=$F("id_Cliente"),a="opcion=12&"+Form.serialize($("frm_srv_fijos"));muestra_debug();new Ajax.Request(e,{method:"post",parameters:a,onComplete:function(e){$("debug").innerHTML=e.responseText;setTimeout("cierra_debug()",2e3);submenu(2),frm_srv_fijo(o)}})}function nuevaPass(){var e="inc/datos_gestion.php",o="opcion=18";new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("listado_copias").innerHTML=e.responseText}})}function estableceNuevaPass(){var e="inc/datos_gestion.php",o="opcion=19&"+Form.serialize($("nuevaPass"));new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("resultadoNuevaPass").innerHTML=e.responseText}})}function lista_backup(){var e="inc/datos_gestion.php",o="opcion=0";new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("listado_copias").innerHTML=e.responseText}})}function hacer_backup(){var e=confirm("Hacer Copia de Seguridad?");if(1==e){var o="inc/datos_gestion.php",a="opcion=1";new Ajax.Request(o,{method:"post",parameters:a,onComplete:function(e){$("estado_copia").innerHTML=e.responseText,lista_backup()},onRequest:$("estado_copia").innerHTML="<center>Generando Copia...<p><img src='imagenes/loader.gif' alt='Generando Copia ...' /></center>"})}}function restaurar_backup(e){var o=confirm("Restaurar Copia?");if(1==o){var a="inc/datos_gestion.php",t="opcion=2&archivo="+e;new Ajax.Request(a,{method:"post",parameters:t,onComplete:function(e){$("estado_copia").innerHTML=e.responseText},onRequest:$("estado_copia").innerHTML="<center>Restaurando Copia...<p><img src='imagenes/loader.gif' alt='Restaurando Copia ...' /></center>"})}}function borrar_backup(e){var o=confirm("Borrar Copia?");if(1==o){var a="inc/datos_gestion.php",t="opcion=3&archivo="+e;new Ajax.Request(a,{method:"post",parameters:t,onComplete:function(e){$("estado_copia").innerHTML=e.responseText,lista_backup()},onRequest:$("estado_copia").innerHTML="<center>Borrando Copia...<p><img src='imagenes/loader.gif' alt='Borrando Copia ...' /></center>"})}}function revisar_tablas(){var e="inc/datos_gestion.php",o="opcion=4";new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("status_tablas").innerHTML=e.responseText,lista_backup()},onRequest:$("status_tablas").innerHTML="<center>Revisando Tablas...<p><img src='imagenes/indicator.gif' alt='Revisando Tablas ...' /></center>"})}function reparar_tablas(){var e="inc/datos_gestion.php",o="opcion=5";new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("status_tablas").innerHTML=e.responseText,lista_backup()},onRequest:$("status_tablas").innerHTML="<center>Reparando Tablas...<p><img src='imagenes/indicator.gif' alt='Reparando Tablas ...' /></center>"})}function optimizar_tablas(){var e="inc/datos_gestion.php",o="opcion=5";new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("status_tablas").innerHTML=e.responseText,lista_backup()},onRequest:$("status_tablas").innerHTML="<center>Optimizando Tablas...<p><img src='imagenes/indicator.gif' alt='Optimizando Tablas ...' /></center>"})}function listado_telefonos(){var e="inc/datos_gestion.php",o="opcion=10";new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("listado_copias").innerHTML=e.responseText}})}function formulario_telefonos(){var e="inc/datos_gestion.php",o="opcion=11";new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("listado_copias").innerHTML=e.responseText},onCreate:$("listado_copias").innerHTML="<center><p class='validacion'>Generando Listado...<br/><img src='imagenes/loader.gif' alt='Generando Listado' /></p></center>"})}function agrega_telefono(){var e="inc/datos_gestion.php",o="opcion=12&"+Form.serialize($("frm_agrega_telefono"));new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("mensajes_estado").innerHTML=e.responseText,formulario_telefonos()}})}function consulta_especial(){var e="inc/datos_gestion.php",o="opcion=13";new Ajax.Request(e,{method:"post",parameters:o,onComplete:function(e){$("listado_copias").innerHTML=e.responseText},onCreate:$("listado_copias").innerHTML="<center><p class='validacion'>Generando Listado...<br/><img src='imagenes/loader.gif' alt='Generando Listado' /></p></center>"})}function cierra_listado_copias(){$("listado_copias").innerHTML=""}function filtra_listado(){var e="inc/datos_gestion.php";pars="opcion=14&tipo="+$("tipo_cliente").value;new Ajax.Request(e,{method:"post",parameters:pars,onComplete:function(e){$("listado_copias").innerHTML=e.responseText},onCreate:$("listado_copias").innerHTML="Generando listado"})}function datos(e){var o=$("datos_interesantes").style;o.visibility="visible",pars="dato="+e,2==e?url="inc/cumples.php":url="inc/datins.php";new Ajax.Request(url,{method:"post",parameters:pars,onComplete:function(e){$("datos_interesantes").innerHTML=e.responseText}})}function cierralo(){var e=$("datos_interesantes").style;e.visibility="hidden"}function popUp(e){window.open(e,'" + id + "',"toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=1,resizable=0,width=900,height=700")}function categorias(e){pars="opcion=7&categoria="+e,url="inc/datos_gestion.php";new Ajax.Request(url,{method:"post",parameters:pars,onComplete:function(e){$("listado_copias").innerHTML=e.responseText}})}function editar_categoria(e){pars="opcion=8&categoria="+$F("categoria")+"&registro="+e,url="inc/datos_gestion.php";new Ajax.Request(url,{method:"post",parameters:pars,onComplete:function(e){$("detalles_categoria").innerHTML=e.responseText}})}function actualiza_categoria(){pars="opcion=9&"+Form.serialize($("formulario_categorias")),url="inc/datos_gestion.php";new Ajax.Request(url,{method:"post",parameters:pars,onComplete:function(e){$("resultadoActCategoria").innerHTML=e.responseText;setTimeout("categorias($F('categoria'))",2e3)}})}function ver_detalles(e,o,a,t){url="inc/detalles.php",0!=e?observacion=encodeURI($F("detalles_obs")):observacion="",pars="opcion="+e+"&accion="+o+"&tipo="+a+"&cliente="+t+"&observacion="+observacion;new Ajax.Request(url,{method:"post",parameters:pars,onComplete:function(e){$("edicion_actividad").innerHTML=e.responseText}})}function cierra_frm_observaciones(){$("edicion_actividad").innerHTML=""}function muestra_campo(){url="inc/telecos.php",campo=encodeURI($("servicio").value),pars="opcion=0&campo="+campo;new Ajax.Request(url,{method:"post",parameters:pars,onComplete:function(e){$("tipo_teleco").innerHTML=e.responseText}})}function chequea_valor(){var e="inc/telecos.php",o=$F("valor"),a=encodeURI($("servicio").value),t="opcion=1&campo="+a+"&valor="+o;new Ajax.Request(e,{method:"post",parameters:t,onComplete:function(e){var o=$("valor").style;o.background=e.responseText;var a=$("boton_envio").style;"#ff0000"==e.responseText?a.visibility="hidden":a.visibility="visible"}})}function busqueda_avanzada(){var e="inc/bavanzada.php";pars="opcion=0&"+Form.serialize($("busqueda_avanzada"));new Ajax.Request(e,{method:"post",parameters:pars,onComplete:function(e){$("resultados_busqueda_avanzada").innerHTML=e.responseText}})}function cerrar_avisos(){$("avisos").innerHTML="<input class='boton' type='button' onclick='ver_avisos()' value='[>]Avisos' />"}function ver_avisos(){var e="inc/avisos.php";pars="opcion=0";new Ajax.Request(e,{method:"post",parameters:pars,onComplete:function(e){var o=$("avisos").style;o.visibility="visible",o.display="block",o.height="90%",o.width="100%",$("avisos").innerHTML=e.responseText},onSuccess:cerrar_tablon_telefonos})}function cerrar_tablon_telefonos(){$("tablon_telefonos").innerHTML="<input type='button' onclick='ver_tablon_telefonos()' value='[^] Ver Telefonos' />";var e=$("tablon_telefonos").style;e.height="18px",e.width="115px",e.overflow="hidden"}function ver_tablon_telefonos(){var e="inc/avisos.php";pars="opcion=1";var o=$("tablon_telefonos").style;o.height="600px",o.width="900px",o.overflow="auto";new Ajax.Request(e,{method:"post",parameters:pars,onComplete:function(e){$("tablon_telefonos").innerHTML=e.responseText}})}function parametros_factura(e){var o=$("parametros_factura").style;o.visibility="visible",o.display="block";var a="inc/parametros_factura.php";pars="opcion=0&cliente="+e;new Ajax.Request(a,{method:"post",parameters:pars,onComplete:function(e){$("parametros_factura").innerHTML=e.responseText}})}function cerrar_parametros_factura(){var e=$("parametros_factura").style;e.visibility="hidden",e.display="none",$("parametros_factura").innerHTML=""}function establecer_fecha(e){var o="inc/parametros_factura.php";pars="opcion=1&cliente="+e+"&dia="+$F("fecha_facturacion");new Ajax.Request(o,{method:"post",parameters:pars,onComplete:parametros_factura(e)})}function agrupar_servicio(e){var o="inc/parametros_factura.php";pars="opcion=2&cliente="+e+"&servicio="+$("servicio").value;new Ajax.Request(o,{method:"post",parameters:pars,onComplete:parametros_factura(e)})}function quitar_agrupado(e,o){var a="inc/parametros_factura.php";pars="opcion=3&id="+e;new Ajax.Request(a,{method:"post",parameters:pars,onComplete:parametros_factura(o)})}function ver_extensiones(){var e="inc/telecos.php";pars="opcion=2&despacho="+$("despacho").value;new Ajax.Request(e,{method:"post",parameters:pars,onComplete:function(e){$("s_extensiones").innerHTML=e.responseText}})}function borrar_telefono_asignado(e){var o="inc/datos_gestion.php";pars="opcion=15&telefono="+e;new Ajax.Request(o,{method:"post",parameters:pars,onComplete:function(e){alert(e.responseText),formulario_telefonos()}})}function editar_telefono_asignado(e){var o="inc/datos_gestion.php";pars="opcion=16&telefono="+e;new Ajax.Request(o,{method:"post",parameters:pars,onComplete:function(o){$("edicion_"+e).innerHTML=o.responseText}})}function actualiza_descripcion_telefono(e){var o="inc/datos_gestion.php",a=$F("descripcion_"+e),t=$F("identificador_"+e);pars="opcion=17&telefono="+e+"&descripcion="+a+"&id="+t,console.log(pars);new Ajax.Request(o,{method:"post",parameters:pars,onComplete:function(e){formulario_telefonos()}})}